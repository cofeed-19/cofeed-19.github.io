(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(3730)}])},3730:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var n=r(4051),i=r.n(n),a=r(5893),o=r(5675),c=r(7294),s=r(5003),u=r.n(s),l=r(1335);function f(e){var t=e.feed,r=e.onClick,n=(0,c.useMemo)((function(){var e="favorite-pin";return t.priority?"".concat(e," pinned"):e}),[t.priority]),i=t.priority?"Unpin":"Pin";return(0,a.jsx)("abbr",{title:i,className:n,onClick:function(){return r(t)},children:"\ud83d\udccc"})}var p=r(4014),v=r(5682);function d(e,t,r,n,i,a,o){try{var c=e[a](o),s=c.value}catch(u){return void r(u)}c.done?t(s):Promise.resolve(s).then(n,i)}function h(e){return function(){var t=this,r=arguments;return new Promise((function(n,i){var a=e.apply(t,r);function o(e){d(a,n,i,o,c,"next",e)}function c(e){d(a,n,i,o,c,"throw",e)}o(void 0)}))}}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){x(e,t,r[t])}))}return e}var y=new(u());function k(){return m.apply(this,arguments)}function m(){return(m=h(i().mark((function e(){var t,r,n,a,o,c,s,u;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.qZ)();case 2:return e.next=4,(0,p.lj)();case 4:for(t=e.sent,r={},n=!0,a=!1,o=void 0,e.prev=7,c=t[Symbol.iterator]();!(n=(s=c.next()).done);n=!0)u=s.value,r[u.url]=u;e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),a=!0,o=e.t0;case 15:e.prev=15,e.prev=16,n||null==c.return||c.return();case 18:if(e.prev=18,!a){e.next=21;break}throw o;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return e.abrupt("return",r);case 24:case"end":return e.stop()}}),e,null,[[7,11,15,23],[16,,18,22]])})))).apply(this,arguments)}function w(){var e=(0,c.useState)(0),t=e[0],r=e[1],n=(0,c.useState)({}),s=n[0],u=n[1],d=(0,c.useState)({total:0,loaded:0}),x=d[0],m=d[1];function w(){return j.apply(this,arguments)}function j(){return(j=h(i().mark((function e(){var t,n,a,o,c,s,l,f,p,d,h,x;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,e.next=3,k();case 3:n=e.sent,a=Object.keys(n).length,m((function(e){return b({},e,{total:a})})),o=!0,c=!1,s=void 0,e.prev=7,l=Object.keys(n)[Symbol.iterator]();case 9:if(o=(f=l.next()).done){e.next=30;break}return p=f.value,e.prev=11,e.next=14,y.parseURL(p);case 14:return d=e.sent,e.next=17,(0,v.KU)(d.link);case 17:h=e.sent,(x=b({},d,{url:p,favicon:h,visited:n[p].visited||{},priority:n[p].priority})).priority&&x.priority>t&&(t=x.priority),n[p]=x,e.next=26;break;case 23:e.prev=23,e.t0=e.catch(11),console.error("Could not update feed for ".concat(p));case 26:m((function(e){return b({},e,{loaded:e.loaded+1})}));case 27:o=!0,e.next=9;break;case 30:e.next=36;break;case 32:e.prev=32,e.t1=e.catch(7),c=!0,s=e.t1;case 36:e.prev=36,e.prev=37,o||null==l.return||l.return();case 39:if(e.prev=39,!c){e.next=42;break}throw s;case 42:return e.finish(39);case 43:return e.finish(36);case 44:r(t),u(n);case 46:case"end":return e.stop()}}),e,null,[[7,32,36,44],[11,23],[37,,39,43]])})))).apply(this,arguments)}function O(){return(O=h(i().mark((function e(t){var r,n,a,o,c,s,u,l,f;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.trim().split(",").filter(Boolean),n=[],a=!0,o=!1,c=void 0,e.prev=3,s=r[Symbol.iterator]();case 5:if(a=(u=s.next()).done){e.next=28;break}return l=u.value,e.prev=8,e.next=11,y.parseURL(l);case 11:f=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),n.push(l);case 17:if(e.t1=f,!e.t1){e.next=22;break}return e.next=21,(0,p.bd)(l);case 21:e.t1=!e.sent;case 22:if(!e.t1){e.next=25;break}return e.next=25,(0,p.jP)({url:l,visited:{}});case 25:a=!0,e.next=5;break;case 28:e.next=34;break;case 30:e.prev=30,e.t2=e.catch(3),o=!0,c=e.t2;case 34:e.prev=34,e.prev=35,a||null==s.return||s.return();case 37:if(e.prev=37,!o){e.next=40;break}throw c;case 40:return e.finish(37);case 41:return e.finish(34);case 42:n.length&&alert("Could not add:\n".concat(n.join("\n"),"\n\nProbable CORS issue\ud83d\ude22!\nMaybe ask website owner to enable CORS\ud83e\udd14!\nOr install browser extension to allow CORS: https://mybrowseraddon.com/access-control-allow-origin.html")),w();case 44:case"end":return e.stop()}}),e,null,[[3,30,34,42],[8,14],[35,,37,41]])})))).apply(this,arguments)}var S=(0,c.useMemo)((function(){var e=Object.keys(s);return e.sort((function(e,t){var r,n,i=s[e],a=s[t],o=null!==(r=i.priority)&&void 0!==r?r:0,c=null!==(n=a.priority)&&void 0!==n?n:0;return o>c?-1:o<c?1:0})),e}),[s]),C=(0,c.useCallback)(function(){var e=h(i().mark((function e(n){var a,o,c,u,l,f,v,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=S.map((function(e){return s[e]})).map((function(e){return e.url===n.url?b({},e,{priority:n.priority?void 0:t+1}):e}))).sort((function(e,t){return e.priority&&t.priority?e.priority-t.priority:e.priority?-1:t.priority?1:0})),o=a.map((function(e,t){return e.priority?b({},e,{priority:t+1}):e})),c=!0,u=!1,l=void 0,e.prev=4,f=o[Symbol.iterator]();case 6:if(c=(v=f.next()).done){e.next=13;break}return d=v.value,e.next=10,(0,p.eS)(d);case 10:c=!0,e.next=6;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(4),u=!0,l=e.t0;case 19:e.prev=19,e.prev=20,c||null==f.return||f.return();case 22:if(e.prev=22,!u){e.next=25;break}throw l;case 25:return e.finish(22);case 26:return e.finish(19);case 27:r(o.length),w();case 29:case"end":return e.stop()}}),e,null,[[4,15,19,27],[20,,22,26]])})));return function(t){return e.apply(this,arguments)}}(),[t,S,s]);return(0,c.useEffect)((function(){w()}),[]),(0,c.useEffect)((function(){x.loaded>x.total&&m(b({},x,{loaded:x.total}))}),[x]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.NC,{}),(0,a.jsx)(l.h4,{}),(0,a.jsxs)("main",{children:[(0,a.jsx)(l.Ob,{onSubmit:function(e){return O.apply(this,arguments)}}),(0,a.jsx)(l.s0,{loadedFeeds:x}),S.map((function(e){var t=s[e],r=t.items.filter((function(e){return e.link&&(!t.visited||!t.visited[e.link])})),n=t.items.filter((function(e){return e.link&&t.visited&&t.visited[e.link]}));return(0,a.jsxs)("section",{children:[(0,a.jsxs)("h3",{children:[(0,a.jsx)(f,{feed:t,onClick:C}),t.link?(0,a.jsxs)(a.Fragment,{children:[t.favicon&&(0,a.jsx)(o.default,{alt:t.title,src:t.favicon,width:16,height:16,unoptimized:!0}),(0,a.jsx)(l.dL,{link:t.link,title:t.title})]}):t.title||e," ",(0,a.jsx)("button",{onClick:function(){return function(e,t){confirm("Delete ".concat(t," from feeds?"))&&((0,p.vs)(e),w())}(e,t.title)},children:"\u274c"})]}),(0,a.jsx)(l.lZ,{feed:t,feedUrl:e,newItems:r,updateFeeds:w}),(0,a.jsx)(l.xx,{feed:t,feedUrl:e,visitedItems:n})]},e)}))]}),(0,a.jsx)(l.$_,{})]})}}},function(e){e.O(0,[392,335,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
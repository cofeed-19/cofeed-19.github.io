(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9292)}])},9292:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var r=n(4051),s=n.n(r),i=n(5893),c=n(7294),a=n(5003),o=n.n(a);const u=e=>(new DOMParser).parseFromString(e,"text/html"),l=e=>(e=>fetch(e))(e).then((e=>e.text())).then(u).then((e=>e.querySelectorAll("head link"))),f=e=>{const t=["rel","href","sizes"];return[...e].filter((e=>e.getAttribute("href")&&e.getAttribute("rel").includes("icon"))).map((e=>t.reduce(((t,n)=>({...t,[n]:e.getAttribute(n)})),{})))},d=e=>l(e).then(f).then((e=>t=>{const n=e=>new URL(e).origin;return t.map((({sizes:t,href:r,rel:s})=>({size:parseInt(null===t||void 0===t?void 0:t.split("x")[0])||void 0,href:"/"===r[0]?"".concat(n(e)).concat(r):r,rel:s})))})(e)),p=e=>d(e).then((e=>{const t=(e=>e.reduce(((e,t)=>{const n=e.filter((({rel:e})=>t.rel===e))[0];if(n){if(t.size>n.size){const n=e.findIndex((({rel:e})=>t.rel===e));e[n]=t}}else e.push(t);return e}),[]))(e);return t.sort(((e,t)=>t.size-e.size))}));var h={getIcons:d,getBestIcons:p,getBestIcon:e=>p(e).then((e=>{const t=e[0];return t&&t.size>50?t:(e=>{const t=e=>e.includes("apple-touch-icon");return e.sort(((e,n)=>t(n.rel)?1:t(e.rel)?-1:0))})(e)}))},v=n(3982),x=n(4014);function b(e,t,n,r,s,i,c){try{var a=e[i](c),o=a.value}catch(u){return void n(u)}a.done?t(o):Promise.resolve(o).then(r,s)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var i=e.apply(t,n);function c(e){b(i,r,s,c,a,"next",e)}function a(e){b(i,r,s,c,a,"throw",e)}c(void 0)}))}}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}var j=new(o());function y(){return g.apply(this,arguments)}function g(){return(g=k(s().mark((function e(){var t,n,r,i,c,a,o,u;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.qZ)();case 2:return e.next=4,(0,x.lj)();case 4:for(t=e.sent,n={},r=!0,i=!1,c=void 0,e.prev=7,a=t[Symbol.iterator]();!(r=(o=a.next()).done);r=!0)u=o.value,n[u.url]=u;e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),i=!0,c=e.t0;case 15:e.prev=15,e.prev=16,r||null==a.return||a.return();case 18:if(e.prev=18,!i){e.next=21;break}throw c;case 21:return e.finish(18);case 22:return e.finish(15);case 23:return e.abrupt("return",n);case 24:case"end":return e.stop()}}),e,null,[[7,11,15,23],[16,,18,22]])})))).apply(this,arguments)}function O(){var e=(0,c.useState)({}),t=e[0],n=e[1],r=(0,c.useState)({total:0,loaded:0}),a=r[0],o=r[1];function u(){return l.apply(this,arguments)}function l(){return(l=k(s().mark((function e(){var t,r,i,c,a,u,l,f,d,p,v;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:t=e.sent,r=Object.keys(t).length,o((function(e){return w({},e,{total:r})})),i=!0,c=!1,a=void 0,e.prev=6,u=Object.keys(t)[Symbol.iterator]();case 8:if(i=(l=u.next()).done){e.next=32;break}return f=l.value,e.prev=12,e.next=15,j.parseURL(f);case 15:if(d=e.sent,e.t0=d.link,!e.t0){e.next=21;break}return e.next=20,h.getBestIcons(d.link);case 20:e.t0=e.sent[0].href;case 21:p=e.t0,e.next=27;break;case 24:e.prev=24,e.t1=e.catch(12),console.error("Could not update feed for ".concat(f));case 27:d&&(v=w({},d,{url:f,favicon:p,visited:t[f].visited||{}}),t[f]=v),o((function(e){return w({},e,{loaded:e.loaded+1})}));case 29:i=!0,e.next=8;break;case 32:e.next=38;break;case 34:e.prev=34,e.t2=e.catch(6),c=!0,a=e.t2;case 38:e.prev=38,e.prev=39,i||null==u.return||u.return();case 41:if(e.prev=41,!c){e.next=44;break}throw a;case 44:return e.finish(41);case 45:return e.finish(38);case 46:n(t);case 47:case"end":return e.stop()}}),e,null,[[6,34,38,46],[12,24],[39,,41,45]])})))).apply(this,arguments)}function f(){return(f=k(s().mark((function e(t){var n,r,i,c,a,o,l,f,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.trim().split(",").filter(Boolean),r=[],i=!0,c=!1,a=void 0,e.prev=3,o=n[Symbol.iterator]();case 5:if(i=(l=o.next()).done){e.next=28;break}return f=l.value,e.prev=8,e.next=11,j.parseURL(f);case 11:d=e.sent,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),r.push(f);case 17:if(e.t1=d,!e.t1){e.next=22;break}return e.next=21,(0,x.bd)(f);case 21:e.t1=!e.sent;case 22:if(!e.t1){e.next=25;break}return e.next=25,(0,x.jP)({url:f,visited:{}});case 25:i=!0,e.next=5;break;case 28:e.next=34;break;case 30:e.prev=30,e.t2=e.catch(3),c=!0,a=e.t2;case 34:e.prev=34,e.prev=35,i||null==o.return||o.return();case 37:if(e.prev=37,!c){e.next=40;break}throw a;case 40:return e.finish(37);case 41:return e.finish(34);case 42:r.length&&alert("Could not add:\n".concat(r.join("\n"),"\n\nProbable CORS issue\ud83d\ude22!\nMaybe ask website owner to enable CORS\ud83e\udd14!\nOr install browser extension to allow CORS: https://mybrowseraddon.com/access-control-allow-origin.html")),u();case 44:case"end":return e.stop()}}),e,null,[[3,30,34,42],[8,14],[35,,37,41]])})))).apply(this,arguments)}return(0,c.useEffect)((function(){u()}),[]),(0,c.useEffect)((function(){a.loaded>a.total&&o(w({},a,{loaded:a.total}))}),[a]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(v.NC,{}),(0,i.jsx)(v.h4,{}),(0,i.jsxs)("main",{children:[(0,i.jsx)(v.Ob,{onSubmit:function(e){return f.apply(this,arguments)}}),(0,i.jsx)(v.s0,{loadedFeeds:a}),Object.keys(t).map((function(e){var n=t[e],r=n.items.filter((function(e){return e.link&&(!n.visited||!n.visited[e.link])})),s=n.items.filter((function(e){return e.link&&n.visited&&n.visited[e.link]}));return(0,i.jsxs)("section",{children:[(0,i.jsxs)("h3",{children:[n.link?(0,i.jsxs)(i.Fragment,{children:[n.favicon&&(0,i.jsx)("img",{alt:n.title,src:n.favicon,width:16,height:16}),(0,i.jsx)(v.dL,{link:n.link,title:n.title})]}):n.title||e," ",(0,i.jsx)("button",{onClick:function(){return function(e,t){confirm("Delete ".concat(t," from feeds?"))&&((0,x.vs)(e),u())}(e,n.title)},children:"X"})]}),(0,i.jsx)(v.lZ,{feed:n,feedUrl:e,newItems:r,updateFeeds:u}),(0,i.jsx)(v.xx,{feed:n,feedUrl:e,visitedItems:s})]},e)}))]}),(0,i.jsx)(v.$_,{})]})}}},function(e){e.O(0,[387,982,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
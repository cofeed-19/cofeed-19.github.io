(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{2562:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var r=n(4942),o=n(5861),a=n(7757),i=n.n(a),c=n(7294),s=n(5003),u=n.n(s),l=n(8430),f=n(3564),p=n(5893);function d(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y=new(u()),x="https://thingproxy.freeboard.io/fetch/";function j(){return w.apply(this,arguments)}function w(){return(w=(0,o.Z)(i().mark((function e(){var t,n,r,o,a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.qZ)();case 2:return e.next=4,(0,f.lj)();case 4:t=e.sent,n={},r=d(t);try{for(r.s();!(o=r.n()).done;)a=o.value,n[a.url]=a}catch(i){r.e(i)}finally{r.f()}return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){var e=(0,c.useState)({}),t=e[0],n=e[1],r=(0,c.useState)({total:0,loaded:0}),a=r[0],s=r[1];function u(){return b.apply(this,arguments)}function b(){return(b=(0,o.Z)(i().mark((function e(){var t,r,o,a,c,u,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:t=e.sent,r=Object.keys(t).length,s((function(e){return v(v({},e),{},{total:r})})),o=0,a=Object.keys(t);case 6:if(!(o<a.length)){e.next=32;break}return c=a[o],u=void 0,e.prev=9,e.next=12,y.parseURL(c);case 12:u=e.sent,e.next=27;break;case 15:return e.prev=15,e.t0=e.catch(9),e.prev=17,console.warn("Trying CORS_PROXY"),e.next=21,y.parseURL(x+c);case 21:u=e.sent,e.next=27;break;case 24:e.prev=24,e.t1=e.catch(17),console.error("Could not update feed for ".concat(c));case 27:u&&(l=v(v({},u),{},{url:c,visited:t[c].visited||{}}),t[c]=l),s((function(e){return v(v({},e),{},{loaded:e.loaded+1})}));case 29:o++,e.next=6;break;case 32:n(t);case 33:case"end":return e.stop()}}),e,null,[[9,15],[17,24]])})))).apply(this,arguments)}function h(){return(h=(0,o.Z)(i().mark((function e(t){var n,r,o,a,c,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.trim().split(",").filter(Boolean),r=[],o=d(n),e.prev=3,o.s();case 5:if((a=o.n()).done){e.next=36;break}return c=a.value,s=void 0,e.prev=8,e.next=11,y.parseURL(c);case 11:s=e.sent,e.next=26;break;case 14:return e.prev=14,e.t0=e.catch(8),e.prev=16,console.warn("Trying CORS_PROXY"),e.next=20,y.parseURL(x+c);case 20:s=e.sent,e.next=26;break;case 23:e.prev=23,e.t1=e.catch(16),r.push(c);case 26:if(e.t2=s,!e.t2){e.next=31;break}return e.next=30,(0,f.bd)(c);case 30:e.t2=!e.sent;case 31:if(!e.t2){e.next=34;break}return e.next=34,(0,f.jP)({url:c,visited:{}});case 34:e.next=5;break;case 36:e.next=41;break;case 38:e.prev=38,e.t3=e.catch(3),o.e(e.t3);case 41:return e.prev=41,o.f(),e.finish(41);case 44:r.length&&alert("Could not add:\n".concat(r.join("\n"),"\n\nProbable CORS issue\ud83d\ude22!\nMaybe ask website owner to enable CORS\ud83e\udd14!\nOr install browser extension to allow CORS: https://mybrowseraddon.com/access-control-allow-origin.html")),u();case 46:case"end":return e.stop()}}),e,null,[[3,38,41,44],[8,14],[16,23]])})))).apply(this,arguments)}return(0,c.useEffect)((function(){u()}),[]),(0,c.useEffect)((function(){a.loaded>a.total&&s(v(v({},a),{},{loaded:a.total}))}),[a]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(l.NC,{}),(0,p.jsx)(l.h4,{}),(0,p.jsxs)("main",{children:[(0,p.jsx)(l.Ob,{onSubmit:function(e){return h.apply(this,arguments)}}),(0,p.jsx)(l.s0,{loadedFeeds:a}),Object.keys(t).map((function(e){var n=t[e],r=n.items.filter((function(e){return e.link&&(!n.visited||!n.visited[e.link])})),o=n.items.filter((function(e){return e.link&&n.visited&&n.visited[e.link]}));return(0,p.jsxs)("section",{children:[(0,p.jsxs)("h2",{children:[n.link?(0,p.jsx)(l.dL,{link:n.link,title:n.title}):n.title||e," ",(0,p.jsx)("button",{onClick:function(){return function(e,t){confirm("Delete ".concat(t," from feeds?"))&&((0,f.vs)(e),u())}(e,n.title)},children:"X"})]}),(0,p.jsx)(l.lZ,{feed:n,feedUrl:e,newItems:r,updateFeeds:u}),(0,p.jsx)(l.xx,{feed:n,feedUrl:e,visitedItems:o})]},e)})),(0,p.jsx)("button",{onClick:function(){var e=Object.keys(t);navigator.clipboard.writeText(e.join(",")).then((function(){alert("Feed urls copied to clipboard")}))},children:"Copy feed urls"})]}),(0,p.jsx)(l.$_,{})]})}},5301:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(2562)}])}},function(e){e.O(0,[949,337,774,888,179],(function(){return t=5301,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
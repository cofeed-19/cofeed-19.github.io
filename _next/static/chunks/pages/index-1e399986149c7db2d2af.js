_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[8],{"/EDR":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("23aj")}])},"23aj":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var r=n("nKUr"),i=n("o0o1"),o=n.n(i),c=n("rePB"),a=n("HaE+"),l=n("q1tI"),s=n("sPDk"),u=n.n(s),f=n("T9kL");function d(e){var t=e.onSubmit,n=Object(l.useState)(""),i=n[0],o=n[1];return Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),i&&t(i)},children:[Object(r.jsx)("input",{placeholder:"https://strdr4605.github.io/rss.xml,http://example.com/atom.xml",type:"text",value:i,onChange:function(e){o(e.target.value)}}),Object(r.jsx)("button",{type:"submit",children:"Add feeds"})]})}var b=n("4oX2"),p=n("3bhu"),v=n("4D8y");function j(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,a=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return c=e.done,e},e:function(e){a=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(a)throw o}}}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=new u.a,k="https://thingproxy.freeboard.io/fetch/";function x(){for(var e={},t=0,n=Object.keys(localStorage);t<n.length;t++){var r=n[t];if(r.startsWith("http")){var i=localStorage.getItem(r);i&&(e[r]=JSON.parse(i))}}return e}function g(){var e=Object(l.useState)({}),t=e[0],n=e[1];function i(){return(i=Object(a.a)(o.a.mark((function e(t){var n,r,i,c,a,l,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.split(",").filter(Boolean),r=[],i=j(n),e.prev=3,i.s();case 5:if((c=i.n()).done){e.next=29;break}return a=c.value,l=void 0,e.prev=8,e.next=11,m.parseURL(a);case 11:l=e.sent,e.next=26;break;case 14:return e.prev=14,e.t0=e.catch(8),e.prev=16,console.warn("Trying CORS_PROXY"),e.next=20,m.parseURL(k+a);case 20:l=e.sent,e.next=26;break;case 23:e.prev=23,e.t1=e.catch(16),r.push(a);case 26:l&&!localStorage.getItem(a)&&(s=y(y({},l),{},{visited:{}}),localStorage.setItem(a,JSON.stringify(s)));case 27:e.next=5;break;case 29:e.next=34;break;case 31:e.prev=31,e.t2=e.catch(3),i.e(e.t2);case 34:return e.prev=34,i.f(),e.finish(34);case 37:r.length&&alert("Could not add:\n".concat(r.join("\n"),"\n\nProbable CORS issue\ud83d\ude22!\nMaybe ask website owner to enable CORS\ud83e\udd14!")),window.location.reload();case 39:case"end":return e.stop()}}),e,null,[[3,31,34,37],[8,14],[16,23]])})))).apply(this,arguments)}function c(e,t){if(e&&t){var n=localStorage.getItem(e);if(n){var r=JSON.parse(n);console.log(r),r.visited&&(r.visited[t]=!0),localStorage.setItem(e,JSON.stringify(r))}}}return Object(l.useEffect)((function(){function e(){return(e=Object(a.a)(o.a.mark((function e(){var t,r,i,c,a,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=x(),r=0,i=Object.keys(t);case 2:if(!(r<i.length)){e.next=27;break}return c=i[r],a=void 0,e.prev=5,e.next=8,m.parseURL(c);case 8:a=e.sent,e.next=23;break;case 11:return e.prev=11,e.t0=e.catch(5),e.prev=13,console.warn("Trying CORS_PROXY"),e.next=17,m.parseURL(k+c);case 17:a=e.sent,e.next=23;break;case 20:e.prev=20,e.t1=e.catch(13),console.error("Could not update feed for ".concat(c));case 23:a&&(l=y(y({},a),{},{visited:t[c].visited||{}}),localStorage.setItem(c,JSON.stringify(l)),t[c]=l);case 24:r++,e.next=2;break;case 27:n(t);case 28:case"end":return e.stop()}}),e,null,[[5,11],[13,20]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(v.a,{}),Object(r.jsx)(p.a,{}),Object(r.jsxs)("main",{children:[Object(r.jsx)(d,{onSubmit:function(e){return i.apply(this,arguments)}}),Object.keys(t).map((function(e){var n=t[e],i=null===n||void 0===n?void 0:n.items.filter((function(e){return e.link&&(!n.visited||!n.visited[e.link])})),o=null===n||void 0===n?void 0:n.items.filter((function(e){return e.link&&n.visited&&n.visited[e.link]}));return Object(r.jsxs)("section",{children:[Object(r.jsxs)("h2",{children:[(null===n||void 0===n?void 0:n.title)||e," ",Object(r.jsx)("button",{onClick:function(){return function(e,t){confirm("Delete ".concat(t," from feeds?"))&&(localStorage.removeItem(e),window.location.reload())}(e,null===n||void 0===n?void 0:n.title)},children:"X"})]}),Object(r.jsx)("ul",{children:null===i||void 0===i?void 0:i.map((function(t){return t.link?Object(r.jsx)("li",{children:Object(r.jsx)(f.a,{title:t.title||t.link,link:t.link,onClick:function(){return c(e,t.link)}},t.link)}):null}))}),i.length?Object(r.jsx)("button",{onClick:function(){confirm("Mark all ".concat((null===n||void 0===n?void 0:n.title)||e," as visited?"))&&i.forEach((function(t){return c(e,t.link)}))},children:"Mark all as visited"}):null,Object.keys(n.visited||{}).length?Object(r.jsxs)("details",{children:[Object(r.jsxs)("summary",{children:["Visited from ",(null===n||void 0===n?void 0:n.title)||e]}),Object(r.jsx)("ul",{children:null===o||void 0===o?void 0:o.map((function(t){return t.link?Object(r.jsx)("li",{children:Object(r.jsx)(f.a,{title:t.title||t.link,link:t.link,onClick:function(){return c(e,t.link)}},t.link)}):null}))})]}):null]},e)})),Object(r.jsx)("button",{onClick:function(){var e=Object.keys(t);navigator.clipboard.writeText(e.join(",")).then((function(){alert("Feed urls copied to clipboard")}))},children:"Copy feed urls"})]}),Object(r.jsx)(b.a,{})]})}}},[["/EDR",0,2,1,3]]]);
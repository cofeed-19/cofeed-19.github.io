_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[8],{"/EDR":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("23aj")}])},"23aj":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var r=n("nKUr"),o=n("o0o1"),i=n.n(o),a=n("rePB"),c=n("HaE+"),l=n("q1tI"),s=n("sPDk"),u=n.n(s),d=n("T9kL");function f(e){var t=e.onSubmit,n=Object(l.useState)(""),o=n[0],i=n[1];return Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),o&&t(o)},children:[Object(r.jsx)("input",{placeholder:"https://strdr4605.github.io/rss.xml,http://example.com/atom.xml",type:"text",value:o,onChange:function(e){i(e.target.value)}}),Object(r.jsx)("button",{type:"submit",children:"Add feeds"})]})}var b=n("4oX2"),p=n("3bhu"),j=n("4D8y");function v(e){var t=e.loadedFeeds;return t.loaded!==t.total?Object(r.jsxs)("h3",{children:["Loading:",Object(r.jsx)("progress",{id:"loading",value:t.loaded,max:t.total})]}):null}function O(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(a.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=new u.a,k="https://thingproxy.freeboard.io/fetch/";function g(){for(var e={},t=0,n=Object.keys(localStorage);t<n.length;t++){var r=n[t];if(r.startsWith("http")){var o=localStorage.getItem(r);o&&(e[r]=JSON.parse(o))}}return e}function w(){var e=Object(l.useState)({}),t=e[0],n=e[1],o=Object(l.useState)({total:0,loaded:0}),a=o[0],s=o[1];function u(){return(u=Object(c.a)(i.a.mark((function e(t){var n,r,o,a,c,l,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.trim().split(",").filter(Boolean),r=[],o=O(n),e.prev=3,o.s();case 5:if((a=o.n()).done){e.next=29;break}return c=a.value,l=void 0,e.prev=8,e.next=11,x.parseURL(c);case 11:l=e.sent,e.next=26;break;case 14:return e.prev=14,e.t0=e.catch(8),e.prev=16,console.warn("Trying CORS_PROXY"),e.next=20,x.parseURL(k+c);case 20:l=e.sent,e.next=26;break;case 23:e.prev=23,e.t1=e.catch(16),r.push(c);case 26:l&&!localStorage.getItem(c)&&(s=y(y({},l),{},{visited:{}}),localStorage.setItem(c,JSON.stringify(s)));case 27:e.next=5;break;case 29:e.next=34;break;case 31:e.prev=31,e.t2=e.catch(3),o.e(e.t2);case 34:return e.prev=34,o.f(),e.finish(34);case 37:r.length&&alert("Could not add:\n".concat(r.join("\n"),"\n\nProbable CORS issue\ud83d\ude22!\nMaybe ask website owner to enable CORS\ud83e\udd14!\nOr install browser extension to allow CORS: https://mybrowseraddon.com/access-control-allow-origin.html")),window.location.reload();case 39:case"end":return e.stop()}}),e,null,[[3,31,34,37],[8,14],[16,23]])})))).apply(this,arguments)}function h(e,t,n){if(t&&n){var r=localStorage.getItem(t);if(r){var o=JSON.parse(r);o.visited&&(o.visited[n]=!0),localStorage.setItem(t,JSON.stringify(o)),e&&(e.currentTarget.style.color="var(--link-visited-color)")}}}return Object(l.useEffect)((function(){function e(){return(e=Object(c.a)(i.a.mark((function e(){var t,r,o,a,c,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=g(),r=Object.keys(t).length,s((function(e){return y(y({},e),{},{total:r})})),o=0,a=Object.keys(t);case 4:if(!(o<a.length)){e.next=30;break}return c=a[o],s((function(e){return y(y({},e),{},{loaded:e.loaded+1})})),l=void 0,e.prev=8,e.next=11,x.parseURL(c);case 11:l=e.sent,e.next=26;break;case 14:return e.prev=14,e.t0=e.catch(8),e.prev=16,console.warn("Trying CORS_PROXY"),e.next=20,x.parseURL(k+c);case 20:l=e.sent,e.next=26;break;case 23:e.prev=23,e.t1=e.catch(16),console.error("Could not update feed for ".concat(c));case 26:l&&(u=y(y({},l),{},{visited:t[c].visited||{}}),localStorage.setItem(c,JSON.stringify(u)),t[c]=u);case 27:o++,e.next=4;break;case 30:n(t);case 31:case"end":return e.stop()}}),e,null,[[8,14],[16,23]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(j.a,{}),Object(r.jsx)(p.a,{}),Object(r.jsxs)("main",{children:[Object(r.jsx)(f,{onSubmit:function(e){return u.apply(this,arguments)}}),Object(r.jsx)(v,{loadedFeeds:a}),Object.keys(t).map((function(e){var n=t[e],o=null===n||void 0===n?void 0:n.items.filter((function(e){return e.link&&(!n.visited||!n.visited[e.link])})),i=null===n||void 0===n?void 0:n.items.filter((function(e){return e.link&&n.visited&&n.visited[e.link]}));return Object(r.jsxs)("section",{children:[Object(r.jsxs)("h2",{children:[(null===n||void 0===n?void 0:n.title)||e," ",Object(r.jsx)("button",{onClick:function(){return function(e,t){confirm("Delete ".concat(t," from feeds?"))&&(localStorage.removeItem(e),window.location.reload())}(e,null===n||void 0===n?void 0:n.title)},children:"X"})]}),Object(r.jsx)("ul",{children:null===o||void 0===o?void 0:o.map((function(t){return t.link?Object(r.jsx)("li",{children:Object(r.jsx)(d.a,{title:t.title||t.link,link:t.link,onClick:function(n){return h(n,e,t.link)}})},t.link):null}))}),o.length?Object(r.jsx)("button",{onClick:function(){confirm("Mark all ".concat((null===n||void 0===n?void 0:n.title)||e," as visited?"))&&(o.forEach((function(t){return h(void 0,e,t.link)})),window.location.reload())},children:"Mark all as visited"}):null,Object.keys(n.visited||{}).length?Object(r.jsxs)("details",{children:[Object(r.jsxs)("summary",{children:["Visited from ",(null===n||void 0===n?void 0:n.title)||e]}),Object(r.jsx)("ul",{children:null===i||void 0===i?void 0:i.map((function(t){return t.link?Object(r.jsx)("li",{children:Object(r.jsx)(d.a,{title:t.title||t.link,link:t.link,onClick:function(n){return h(n,e,t.link)}})},t.link):null}))})]}):null]},e)})),Object(r.jsx)("button",{onClick:function(){var e=Object.keys(t);navigator.clipboard.writeText(e.join(",")).then((function(){alert("Feed urls copied to clipboard")}))},children:"Copy feed urls"})]}),Object(r.jsx)(b.a,{})]})}}},[["/EDR",0,2,1,3]]]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[290],{7290:function(e,t,n){"use strict";n.d(t,{dL:function(){return s},fE:function(){return q},$_:function(){return a},NC:function(){return F},h4:function(){return N},Ob:function(){return P},lZ:function(){return W},s0:function(){return O},xx:function(){return Z}});var r=n(5893),o=n(3968),i=n.n(o);function s(e){let{title:t,link:n,onClick:o}=e;return(0,r.jsx)("a",{className:i().link,href:n,rel:"noopener",target:"_blank",onClick:o,children:t||n})}var c=n(148),l=n.n(c);function a(){return(0,r.jsxs)("footer",{className:l().footer,children:[(0,r.jsx)("hr",{}),"\xa9 ",new Date().getFullYear()," ",(0,r.jsx)("a",{href:"https://github.com/strdr4605",rel:"noopener noreferrer",target:"_blank",children:"@strdr4605"}),". Try ",(0,r.jsx)("code",{children:"https://strdr4605.com/feed/rss.xml"})," as your first web feed."]})}var d=n(1664),u=n.n(d),f=n(7294),m=n(5491),h=n(3789);async function p(){var e,t,n;let r=(await (0,m.lj)()).map(e=>(function(e){var t,n;let{url:r,priority:o}=e,i="",s="",c=RegExp("(?<=\\.).*?(?=\\/)"),l=null===(t=c.exec(e.url))||void 0===t?void 0:t[0];if(l){let[e,t]=r.split(".".concat(l,"/"));i="".concat(e).concat(l,"/"),s=t}else i="".concat(r,"/");let a=Object.keys(null!==(n=e.visited)&&void 0!==n?n:{}).map(e=>e.replace(i,""));return{domain:i,url:s,visited:a,priority:o}})(e)),o={db:h.tr,feed:r};e=new Date().toLocaleDateString("uk-en")+"-cofeed.json",t=JSON.stringify(o,void 0,2),(n=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n);let i=function(e){try{var t;let n;let r={},o=(e+"").split(""),i=[],s=o[0],c=256;for(let e=1;e<o.length;e++)n=o[e],null!=r[s+n]?s+=n:(i.push(s.length>1?r[s]:s.charCodeAt(0)),r[s+n]=c,c++,s=n);i.push(s.length>1?r[s]:s.charCodeAt(0));for(let e=0;e<i.length;e++)i[e]=String.fromCharCode(i[e]);return t=i.join(""),window.btoa(unescape(encodeURIComponent(t)))}catch(e){return console.log("Failed to compress string return empty string",e),""}}(JSON.stringify(o)),s=h.N8+i;return s}async function x(e){let t=JSON.parse(e);t.feed?(t.feed.forEach(e=>(0,m.jP)(function(e){var t;let{domain:n,priority:r}=e,o=n+e.url,i=(null===(t=e.visited)||void 0===t?void 0:t.reduce((e,t)=>(e[n+t]=!0,e),{}))||{};return{url:o,visited:i,priority:r}}(e))),console.log("Database updated successfully"),window.location.reload()):alert("Feed is empty")}var y=n(5126),j=n.n(y);async function g(){p()}async function v(e){var t;let n=null===(t=e.target.files)||void 0===t?void 0:t[0],r=await (null==n?void 0:n.text());r&&x(r)}function b(){return(0,r.jsxs)("details",{className:j().form,children:[(0,r.jsx)("summary",{children:"Export/Import"}),(0,r.jsx)("p",{children:"In case if you want to move to a new browser or new device you can export the current state of your feeds:"}),(0,r.jsx)("button",{onClick:g,children:"Export feeds"}),(0,r.jsx)("hr",{}),(0,r.jsx)("p",{children:"Import from file"}),(0,r.jsx)("input",{type:"file",name:"my_files[]",onChange:v})]})}var w=n(8048),k=n(7130),_=n.n(k);function N(){let[e,t]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{let e=!localStorage.getItem("dark-mode")&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches||"true"===localStorage.getItem("dark-mode");e&&((0,w.C8)(),t(!0))},[]),(0,r.jsxs)("header",{className:_().header,children:[(0,r.jsx)(u(),{href:"/",children:(0,r.jsxs)("h1",{children:[(0,r.jsx)("span",{children:"C"}),"lient-",(0,r.jsx)("span",{children:"o"}),"nly ",(0,r.jsx)("span",{children:"Feed"})," Reader"]})}),(0,r.jsxs)("div",{className:_().iframeContainer,children:["No backend! All your feeds are stored in this browser!",(0,r.jsx)("iframe",{src:"https://ghbtns.com/github-btn.html?user=cofeed-19&repo=cofeed-19.github.io&type=star&count=true",title:"GitHub"})]}),(0,r.jsxs)("details",{className:_().details,children:[(0,r.jsx)("summary",{children:"Usage"}),(0,r.jsxs)("ul",{className:_().usage,children:[(0,r.jsxs)("li",{children:["Because we do cross-origin requests some web feeds are blocked by CORS policy\uD83D\uDE22. But you can install"," ",(0,r.jsx)("a",{href:"https://mybrowseraddon.com/access-control-allow-origin.html",children:"a browser extension that allow CORS"}),"\uD83D\uDE0A."]}),(0,r.jsx)("li",{children:"Supports RSS and Atom feeds"}),(0,r.jsxs)("li",{children:["Try ",(0,r.jsx)("u",{children:"http"})," and ",(0,r.jsx)("u",{children:"https"})]}),(0,r.jsxs)("li",{children:["If it's a personal blog, maybe ask the owner to"," ",(0,r.jsx)(s,{link:"https://enable-cors.org/server.html",title:"enable CORS"})]}),(0,r.jsx)("li",{children:(0,r.jsx)(u(),{href:"/feeds",children:"Feeds added by users"})}),(0,r.jsx)("li",{children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:e,onChange:function(e){e.target.checked?(t(!0),(0,w.C8)(),localStorage.setItem("dark-mode","true")):(t(!1),(0,w.UL)(),localStorage.setItem("dark-mode","false"))}}),"Dark mode"]})})]}),(0,r.jsxs)("details",{className:_().details,children:[(0,r.jsx)("summary",{children:"Why to use?"}),(0,r.jsx)("div",{children:(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"It's Free"}),(0,r.jsx)("li",{children:"No account"}),(0,r.jsx)("li",{children:"No tracking"}),(0,r.jsx)("li",{children:"Minimalist"}),(0,r.jsx)("li",{children:"Open source"})]})})]}),(0,r.jsxs)("details",{className:_().details,children:[(0,r.jsx)("summary",{children:"Why NOT to use?"}),(0,r.jsx)("div",{children:(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"CORS issue"}),(0,r.jsx)("li",{children:"No sync with other devices"}),(0,r.jsx)("li",{children:"Minimalist"})]})})]}),(0,r.jsx)(b,{})]}),(0,r.jsx)("hr",{})]})}var S=n(9008),C=n.n(S);function F(){return(0,r.jsxs)(C(),{children:[(0,r.jsx)("meta",{charSet:"UTF-8"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("title",{children:"Client-only Feed Reader"}),(0,r.jsx)("meta",{name:"description",content:"Client-only Free Web Feed Reader, No account, No registration, No tracking, Minimalist, Open source"}),(0,r.jsx)("meta",{property:"og:title",content:"Client-only Feed Reader"}),(0,r.jsx)("meta",{property:"og:image",content:"https://cofeed-19.github.io/banner.jpg"}),(0,r.jsx)("meta",{property:"og:type",content:"website"}),(0,r.jsx)("meta",{property:"og:locale",content:"en_US"}),(0,r.jsx)("meta",{property:"og:description",content:"Client-only Free Web Feed Reader, No account, No registration, No tracking, Minimalist, Open source"}),(0,r.jsx)("meta",{property:"og:url",content:"https://cofeed-19.github.io/"}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,r.jsx)("meta",{name:"twitter:site",content:"https://cofeed-19.github.io/"}),(0,r.jsx)("meta",{name:"twitter:creator",content:"@strdr4605"}),(0,r.jsx)("link",{rel:"icon",href:"https://cofeed-19.github.io/favicon.ico"}),(0,r.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"https://cofeed-19.github.io/apple-touch-icon.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"https://cofeed-19.github.io/favicon-32x32.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"https://cofeed-19.github.io/favicon-16x16.png"}),(0,r.jsx)("link",{rel:"manifest",href:"/site.webmanifest"}),(0,r.jsx)("meta",{name:"theme-color",content:"#EE802f"})]})}var D=n(830),E=n.n(D);function P(e){let{onSubmit:t}=e,[n,o]=(0,f.useState)("");return(0,r.jsxs)("form",{className:E().form,onSubmit:function(e){e.preventDefault(),n&&t(n)},children:[(0,r.jsx)("input",{placeholder:"https://strdr4605.com/feed/rss.xml,http://example.com/atom.xml",type:"text",value:n,onChange:function(e){o(e.target.value)}}),(0,r.jsx)("button",{type:"submit",children:"Add feeds"})]})}var A=n(9592),I=n.n(A);function O(e){let{loadedFeeds:t}=e;return t.loaded!==t.total?(0,r.jsxs)("div",{className:I().container,children:["Loading:",(0,r.jsx)("progress",{id:"loading",value:t.loaded,max:t.total})]}):null}var R=n(6161),L=n.n(R);function U(e){let{date:t}=e;return(0,r.jsx)("span",{className:L().container,children:(0,r.jsx)("i",{children:t?new Date(t).toLocaleDateString(void 0,{timeZone:"UTC",month:"short",day:"2-digit",year:"numeric"}):"No Date"})})}var B=n(1459),M=n.n(B);let $=async(e,t)=>{if(!e||!t)return;let n=await (0,m.bd)(e);n.visited&&(n.visited[t]=!0),await (0,m.eS)(n)},H=async(e,t)=>{if(!e||!t.length)return;let n=await (0,m.bd)(e);if(n.visited)for(let e of t)n.visited[e]=!0;await (0,m.eS)(n)};function W(e){let{feed:t,feedUrl:n,newItems:o,updateFeeds:i}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("ul",{className:M().list,children:null==o?void 0:o.map(e=>e.link?(0,r.jsxs)("li",{children:[(0,r.jsx)(U,{date:e.pubDate}),(0,r.jsx)(s,{title:e.title||e.link,link:e.link,onClick:()=>$(n,e.link)})]},e.link):null)}),o.length?(0,r.jsx)("button",{onClick:()=>{confirm("Mark all ".concat((null==t?void 0:t.title)||n," as visited?"))&&H(n,o.map(e=>e.link||"").filter(Boolean)).then(()=>i())},children:"Mark all as visited"}):null]})}var T=n(1197),V=n.n(T);function Z(e){let{feed:t,feedUrl:n,visitedItems:o}=e;return Object.keys(t.visited||{}).length?(0,r.jsxs)("details",{className:V().container,children:[(0,r.jsxs)("summary",{children:["Visited from ",(null==t?void 0:t.title)||n]}),(0,r.jsx)("ul",{children:null==o?void 0:o.map(e=>e.link?(0,r.jsxs)("li",{children:[(0,r.jsx)(U,{date:e.pubDate}),(0,r.jsx)(s,{title:e.title||e.link,link:e.link})]},e.link):null)})]}):null}var J=n(4218),Q=n.n(J);function q(e){let{feed:t,onClick:n}=e,o=(0,f.useMemo)(()=>{let e=Q().pin;return t.priority?"".concat(e," ").concat(Q().pinned):e},[t.priority]),i=t.priority?"Unpin":"Pin";return(0,r.jsx)("abbr",{title:i,className:o,onClick:()=>n(t),children:"\uD83D\uDCCC"})}},3789:function(e,t,n){"use strict";var r,o;n.d(t,{$P:function(){return i},N8:function(){return c},h4:function(){return r},tr:function(){return s}});let i="FeedDb",s=1,c="https://cofeed-19.github.io/";(o=r||(r={})).Name="Site_Feed",o.Key="url"},5491:function(e,t,n){"use strict";n.d(t,{vs:function(){return j},bd:function(){return p},lj:function(){return h},qZ:function(){return m},jP:function(){return x},eS:function(){return y}});var r=n(3789);async function o(e,t){e.createObjectStore(t.Name,{keyPath:t.Key})}async function i(e,t,n){let r=e.transaction(t,"readwrite"),o=r.objectStore(t);n.forEach(async e=>await o.add(e))}async function s(e,t,n){return new Promise(r=>{let o=e.transaction([t],"readonly"),i=o.objectStore(t),s=i.get(n);s.onsuccess=()=>r(s.result)})}async function c(e,t){return await new Promise(n=>{let r=e.transaction([t],"readonly"),o=r.objectStore(t);var i=o.getAll();i.onsuccess=()=>n(i.result)})}async function l(e,t,n){let r=e.transaction(t,"readwrite"),o=r.objectStore(t),i=await o.get(n);if(!i){console.log("ID not found",n);return}await o.delete(n)}async function a(e,t,n){let r=e.transaction(t,"readwrite"),o=r.objectStore(t);await o.put(n)}async function d(e){await o(e,r.h4);let t=function(){let e=[];for(let t of Object.keys(localStorage)){if(!t.startsWith("http"))continue;let n=JSON.parse(localStorage.getItem(t)),r={};Object.keys(n.visited).forEach(e=>r[e]=!0),e.push({url:t,visited:r})}return e}();t.forEach(e=>x(e))}let u=[d];async function f(e,t){let n=u.slice(e);return n.reduce((e,n)=>e.then(()=>n(t)),Promise.resolve()).then(()=>!0)}async function m(){return new Promise((e,t)=>{let n=indexedDB.open(r.$P,r.tr);n.onupgradeneeded=t=>{console.log("upgrade is called. old version = ".concat(t.oldVersion,", new version ").concat(t.newVersion));let r=n.result;f(t.oldVersion,r).then(t=>{e(t),r.close()})},n.onsuccess=()=>{console.log("Database was successful created."),e(!0)},n.onerror=()=>{console.log("An error occurred initDatabase() function."),t(!1)}})}async function h(){return new Promise((e,t)=>{let n=indexedDB.open(r.$P,r.tr);n.onsuccess=async()=>{let t=n.result,o=await c(t,r.h4.Name);e(o),t.close()},n.onerror=async()=>{console.log("An error occurred getSiteFeeds() function."),t("An error occurred getSiteFeeds() function.")}})}async function p(e){return new Promise((t,n)=>{let o=indexedDB.open(r.$P,r.tr);o.onsuccess=async()=>{let n=o.result,i=await s(n,r.h4.Name,e);t(i),n.close()},o.onerror=async()=>{console.log("An error occurred getSiteFeeds() function."),n("An error occurred getSiteFeeds() function.")}})}async function x(e){let t=indexedDB.open(r.$P,r.tr);t.onsuccess=async()=>{let n=t.result;await i(n,r.h4.Name,[e]),n.close()},t.onerror=async()=>{console.log("An error occurred insertSiteFeed() function.")}}async function y(e){return new Promise((t,n)=>{let o=indexedDB.open(r.$P,r.tr);o.onsuccess=async()=>{let n=o.result;await a(n,r.h4.Name,e),n.close(),t()},o.onerror=async()=>{console.log("An error occurred updateSiteFeed() function."),n()}})}async function j(e){let t=indexedDB.open(r.$P,r.tr);t.onsuccess=async()=>{let n=t.result;await l(n,r.h4.Name,e),n.close()},t.onerror=async()=>{console.log("An error occurred deleteSiteFeed() function.")}}},8048:function(e,t,n){"use strict";n.d(t,{C8:function(){return o},KU:function(){return s},UL:function(){return i}});var r=n(5392);function o(){document.documentElement.style.setProperty("--body-bg-color","#000"),document.documentElement.style.setProperty("--body-color","#FFF"),document.documentElement.style.setProperty("--link-color","#FFC400"),document.documentElement.style.setProperty("--link-visited-color","#C27DC0"),document.documentElement.style.setProperty("--rss-orange","#ee802f")}function i(){document.documentElement.style.setProperty("--body-bg-color","#FFF"),document.documentElement.style.setProperty("--body-color","#000"),document.documentElement.style.setProperty("--link-color","#00E"),document.documentElement.style.setProperty("--link-visited-color","#551A8B"),document.documentElement.style.setProperty("--rss-orange","#ee802f")}async function s(e){var t,n;let o=null!==(n=e&&(null===(t=(await r.Z.getBestIcons(e))[0])||void 0===t?void 0:t.href))&&void 0!==n?n:await fetch("".concat(e,"/favicon.ico"),{method:"HEAD"}).then(t=>t.ok?"".concat(e,"/favicon.ico"):void 0);return o}},6161:function(e){e.exports={container:"Date_container__g2oQw"}},5126:function(e){e.exports={form:"ExportImportForm_form__xps4k"}},3968:function(e){e.exports={link:"ExternalLink_link__kgaLy"}},4218:function(e){e.exports={pin:"FavoritePin_pin__tmuQk",pinned:"FavoritePin_pinned__U4Qde"}},148:function(e){e.exports={footer:"Footer_footer__1IwEk"}},7130:function(e){e.exports={header:"Header_header__pUpk9",iframeContainer:"Header_iframeContainer__7XXug",details:"Header_details__6q2Mu",usage:"Header_usage__L_SH7"}},830:function(e){e.exports={form:"NewFeedForm_form__sAmZr"}},1459:function(e){e.exports={list:"NewItemsList_list__8wjWC"}},9592:function(e){e.exports={container:"ProgressLoader_container__6QWrx"}},1197:function(e){e.exports={container:"VisitedItemsList_container__j9ttm"}}}]);
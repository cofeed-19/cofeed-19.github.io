(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19],{6019:function(e,t,n){"use strict";n.d(t,{dL:function(){return ExternalLink},fE:function(){return FavoritePin},$_:function(){return Footer},NC:function(){return HeadMeta},h4:function(){return Header},Ob:function(){return NewFeedForm},lZ:function(){return NewItemsList},s0:function(){return ProgressLoader},xx:function(){return VisitedItemsList}});var r=n(5893),o=n(2371),i=n.n(o);function ExternalLink(e){let{title:t,link:n,onClick:o}=e;return(0,r.jsx)("a",{className:i().link,href:n,rel:"noopener",target:"_blank",onClick:o,children:t||n})}var s=n(3766),a=n.n(s);function Footer(){return(0,r.jsxs)("footer",{className:a().footer,children:[(0,r.jsx)("hr",{}),"\xa9 ",new Date().getFullYear()," ",(0,r.jsx)("a",{href:"https://github.com/strdr4605",rel:"noopener noreferrer",target:"_blank",children:"@strdr4605"}),". Try ",(0,r.jsx)("code",{children:"https://strdr4605.com/feed/rss.xml"})," as your first web feed."]})}var l=n(1664),c=n.n(l),d=n(7294),u=n(3485),m=n(6621),f=n(5003),h=n.n(f);async function exportFeed(){var e,t,n;let r=(await (0,u.lj)()).map(e=>(function(e){var t,n;let{url:r,priority:o}=e,i="",s=RegExp("(?<=\\.).*?(?=\\/)"),a=null===(t=s.exec(e.url))||void 0===t?void 0:t[0];if(a){let[e,t]=r.split(".".concat(a,"/"));i="".concat(e).concat(a,"/")}else i="".concat(r,"/");let l=Object.keys(null!==(n=e.visited)&&void 0!==n?n:{}).map(e=>e.replace(i,""));return{domain:i,url:e.url,visited:l,priority:o,items:[]}})(e)),o={db:m.tr,feed:r};e=new Date().toLocaleDateString("uk-en")+"-cofeed.json",t=JSON.stringify(o,void 0,2),(n=document.createElement("a")).setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.click(),document.body.removeChild(n);let i=function(e){try{var t;let n;let r={},o=(e+"").split(""),i=[],s=o[0],a=256;for(let e=1;e<o.length;e++)n=o[e],null!=r[s+n]?s+=n:(i.push(s.length>1?r[s]:s.charCodeAt(0)),r[s+n]=a,a++,s=n);i.push(s.length>1?r[s]:s.charCodeAt(0));for(let e=0;e<i.length;e++)i[e]=String.fromCharCode(i[e]);return t=i.join(""),window.btoa(unescape(encodeURIComponent(t)))}catch(e){return console.log("Failed to compress string return empty string",e),""}}(JSON.stringify(o)),s=m.N8+i;return s}async function importFeedFromFile(e){let t=JSON.parse(e),n=new(h()),r=[];if(t.feed){for await(let e of t.feed)try{let t=await n.parseURL(e.url);t&&(0,u.jP)(function(e){var t;let{domain:n,priority:r}=e,o=e.url,i=(null===(t=e.visited)||void 0===t?void 0:t.reduce((t,n)=>(t[e.url]=!0,t),{}))||{};return{url:o,visited:i,priority:r,items:[]}}(e))}catch(t){r.push(e.url),console.error("Could not update feed for ".concat(e.url," ").concat(t))}r.length&&alert("Could not add:\n".concat(r.join("\n"),"\n\nProbable CORS issue\uD83D\uDE22!\nMaybe ask website owner to enable CORS\uD83E\uDD14!\nOr install browser extension to allow CORS: https://mybrowseraddon.com/access-control-allow-origin.html")),console.log("Database updated successfully"),window.location.reload()}else alert("Feed is empty")}var p=n(8723),x=n.n(p);async function onExportClick(){exportFeed()}async function onFileLoad(e){var t;let n=null===(t=e.target.files)||void 0===t?void 0:t[0],r=await (null==n?void 0:n.text());r&&importFeedFromFile(r)}function ExportImportForm(){return(0,r.jsxs)("details",{className:x().form,children:[(0,r.jsx)("summary",{children:"Export/Import"}),(0,r.jsx)("p",{children:"In case if you want to move to a new browser or new device you can export the current state of your feeds:"}),(0,r.jsx)("button",{onClick:onExportClick,children:"Export feeds"}),(0,r.jsx)("hr",{}),(0,r.jsx)("p",{children:"Import from file"}),(0,r.jsx)("input",{type:"file",name:"my_files[]",onChange:onFileLoad})]})}var y=n(7276),g=n(8378),j=n.n(g);function Header(){let[e,t]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{let e=!localStorage.getItem("dark-mode")&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches||"true"===localStorage.getItem("dark-mode");e&&((0,y.C8)(),t(!0))},[]),(0,r.jsxs)("header",{className:j().header,children:[(0,r.jsx)(c(),{href:"/",children:(0,r.jsxs)("h1",{children:[(0,r.jsx)("span",{children:"C"}),"lient-",(0,r.jsx)("span",{children:"o"}),"nly ",(0,r.jsx)("span",{children:"Feed"})," Reader"]})}),(0,r.jsxs)("div",{className:j().iframeContainer,children:["No back-end! All your feeds are stored in this browser!",(0,r.jsx)("iframe",{src:"https://ghbtns.com/github-btn.html?user=cofeed-19&repo=cofeed-19.github.io&type=star&count=true",title:"GitHub"})]}),(0,r.jsxs)("details",{className:j().details,children:[(0,r.jsx)("summary",{children:"Usage"}),(0,r.jsxs)("ul",{className:j().usage,children:[(0,r.jsxs)("li",{children:["Because we do cross-origin requests some web feeds are blocked by CORS policy\uD83D\uDE22. But you can install"," ",(0,r.jsx)("a",{href:"https://mybrowseraddon.com/access-control-allow-origin.html",children:"a browser extension that allow CORS"}),"\uD83D\uDE0A."]}),(0,r.jsx)("li",{children:"Supports RSS and Atom feeds"}),(0,r.jsxs)("li",{children:["Try ",(0,r.jsx)("u",{children:"http"})," and ",(0,r.jsx)("u",{children:"https"})]}),(0,r.jsxs)("li",{children:["If it's a personal blog, maybe ask the owner to"," ",(0,r.jsx)(ExternalLink,{link:"https://enable-cors.org/server.html",title:"enable CORS"})]}),(0,r.jsx)("li",{children:(0,r.jsx)(c(),{href:"/feeds",children:"Feeds added by users"})}),(0,r.jsx)("li",{children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:e,onChange:function(e){e.target.checked?(t(!0),(0,y.C8)(),localStorage.setItem("dark-mode","true")):(t(!1),(0,y.UL)(),localStorage.setItem("dark-mode","false"))}}),"Dark mode"]})})]}),(0,r.jsxs)("details",{className:j().details,children:[(0,r.jsx)("summary",{children:"Why to use?"}),(0,r.jsx)("div",{children:(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"It's Free"}),(0,r.jsx)("li",{children:"No account"}),(0,r.jsx)("li",{children:"No tracking"}),(0,r.jsx)("li",{children:"Minimalist"}),(0,r.jsx)("li",{children:"Open source"})]})})]}),(0,r.jsxs)("details",{className:j().details,children:[(0,r.jsx)("summary",{children:"Why NOT to use?"}),(0,r.jsx)("div",{children:(0,r.jsxs)("ul",{children:[(0,r.jsx)("li",{children:"CORS issue"}),(0,r.jsx)("li",{children:"No sync with other devices"}),(0,r.jsx)("li",{children:"Minimalist"})]})})]}),(0,r.jsx)(ExportImportForm,{})]}),(0,r.jsx)("hr",{})]})}var b=n(9008),v=n.n(b);function HeadMeta(){return(0,r.jsxs)(v(),{children:[(0,r.jsx)("meta",{charSet:"UTF-8"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("title",{children:"Client-only Feed Reader"}),(0,r.jsx)("meta",{name:"description",content:"Client-only Free Web Feed Reader, No account, No registration, No tracking, Minimalist, Open source"}),(0,r.jsx)("meta",{property:"og:title",content:"Client-only Feed Reader"}),(0,r.jsx)("meta",{property:"og:image",content:"https://cofeed-19.github.io/banner.jpg"}),(0,r.jsx)("meta",{property:"og:type",content:"website"}),(0,r.jsx)("meta",{property:"og:locale",content:"en_US"}),(0,r.jsx)("meta",{property:"og:description",content:"Client-only Free Web Feed Reader, No account, No registration, No tracking, Minimalist, Open source"}),(0,r.jsx)("meta",{property:"og:url",content:"https://cofeed-19.github.io/"}),(0,r.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,r.jsx)("meta",{name:"twitter:site",content:"https://cofeed-19.github.io/"}),(0,r.jsx)("meta",{name:"twitter:creator",content:"@strdr4605"}),(0,r.jsx)("link",{rel:"icon",href:"https://cofeed-19.github.io/favicon.ico"}),(0,r.jsx)("link",{rel:"apple-touch-icon",sizes:"180x180",href:"https://cofeed-19.github.io/apple-touch-icon.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"https://cofeed-19.github.io/favicon-32x32.png"}),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"https://cofeed-19.github.io/favicon-16x16.png"}),(0,r.jsx)("link",{rel:"manifest",href:"/site.webmanifest"}),(0,r.jsx)("meta",{name:"theme-color",content:"#EE802f"})]})}var w=n(5813),k=n.n(w);function NewFeedForm(e){let{onSubmit:t}=e,[n,o]=(0,d.useState)("");return(0,r.jsxs)("form",{className:k().form,onSubmit:function(e){e.preventDefault(),n&&t(n)},children:[(0,r.jsx)("input",{placeholder:"https://strdr4605.com/feed/rss.xml,http://example.com/atom.xml",type:"text",value:n,onChange:function(e){o(e.target.value)}}),(0,r.jsx)("button",{type:"submit",children:"Add feeds"})]})}var F=n(9579),_=n.n(F);function ProgressLoader(e){let{loadedFeeds:t}=e;return t.loaded!==t.total?(0,r.jsxs)("div",{className:_().container,children:["Loading:",(0,r.jsx)("progress",{id:"loading",value:t.loaded,max:t.total})]}):null}var S=n(9101),C=n.n(S);function DateComponent(e){let{date:t}=e;return(0,r.jsx)("span",{className:C().container,children:(0,r.jsx)("i",{children:t?new Date(t).toLocaleDateString(void 0,{timeZone:"UTC",month:"short",day:"2-digit",year:"numeric"}):"No Date"})})}var N=n(470),D=n.n(N);let onLinkClick=async(e,t)=>{if(!e||!t)return;let n=await (0,u.bd)(e);n.visited&&(n.visited[t]=!0),await (0,u.eS)(n)},markAllAsVisited=async(e,t)=>{if(!e||!t.length)return;let n=await (0,u.bd)(e);if(n.visited)for(let e of t)n.visited[e]=!0;await (0,u.eS)(n)};function NewItemsList(e){let{feed:t,feedUrl:n,newItems:o,updateFeeds:i}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("ul",{className:D().list,children:null==o?void 0:o.map(e=>e.link?(0,r.jsxs)("li",{children:[(0,r.jsx)(DateComponent,{date:e.pubDate}),(0,r.jsx)(ExternalLink,{title:e.title||e.link,link:e.link,onClick:()=>onLinkClick(n,e.link)})]},e.link):null)}),o.length?(0,r.jsx)("button",{onClick:()=>{confirm("Mark all ".concat((null==t?void 0:t.title)||n," as visited?"))&&markAllAsVisited(n,o.map(e=>e.link||"").filter(Boolean)).then(()=>i())},children:"Mark all as visited"}):null]})}var E=n(2550),P=n.n(E);function VisitedItemsList(e){let{feed:t,feedUrl:n,visitedItems:o}=e;return Object.keys(t.visited||{}).length?(0,r.jsxs)("details",{className:P().container,children:[(0,r.jsxs)("summary",{children:["Visited from ",(null==t?void 0:t.title)||n]}),(0,r.jsx)("ul",{children:null==o?void 0:o.map(e=>e.link?(0,r.jsxs)("li",{children:[(0,r.jsx)(DateComponent,{date:e.pubDate}),(0,r.jsx)(ExternalLink,{title:e.title||e.link,link:e.link})]},e.link):null)})]}):null}var L=n(1392),A=n.n(L);function FavoritePin(e){let{feed:t,onClick:n}=e,o=(0,d.useMemo)(()=>{let e=A().pin;return t.priority?"".concat(e," ").concat(A().pinned):e},[t.priority]),i=t.priority?"Unpin":"Pin";return(0,r.jsx)("abbr",{title:i,className:o,onClick:()=>n(t),children:"\uD83D\uDCCC"})}},6621:function(e,t,n){"use strict";var r,o;n.d(t,{$P:function(){return i},N8:function(){return a},h4:function(){return r},tr:function(){return s}});let i="FeedDb",s=1,a="https://cofeed-19.github.io/";(o=r||(r={})).Name="Site_Feed",o.Key="url"},3485:function(e,t,n){"use strict";n.d(t,{vs:function(){return deleteSiteFeed},bd:function(){return getSiteFeed},lj:function(){return getSiteFeeds},qZ:function(){return initDatabase},jP:function(){return insertSiteFeed},eS:function(){return updateSiteFeed}});var r=n(6621);async function createTable(e,t){e.createObjectStore(t.Name,{keyPath:t.Key})}async function insert(e,t,n){let r=e.transaction(t,"readwrite"),o=r.objectStore(t);n.forEach(async e=>await o.add(e))}async function getOne(e,t,n){return new Promise(r=>{let o=e.transaction([t],"readonly"),i=o.objectStore(t),s=i.get(n);s.onsuccess=()=>r(s.result)})}async function getAll(e,t){return await new Promise(n=>{let r=e.transaction([t],"readonly"),o=r.objectStore(t);var i=o.getAll();i.onsuccess=()=>n(i.result)})}async function deleteByName(e,t,n){let r=e.transaction(t,"readwrite"),o=r.objectStore(t),i=await o.get(n);if(!i){console.log("ID not found",n);return}await o.delete(n)}async function update(e,t,n){let r=e.transaction(t,"readwrite"),o=r.objectStore(t);await o.put(n)}async function V1_init_database(e){await createTable(e,r.h4);let t=function(){let e=[];for(let t of Object.keys(localStorage)){if(!t.startsWith("http"))continue;let n=JSON.parse(localStorage.getItem(t)),r={};Object.keys(n.visited).forEach(e=>r[e]=!0),e.push({url:t,visited:r,items:[]})}return e}();t.forEach(e=>insertSiteFeed(e))}let o=[V1_init_database];async function executeMigrations(e,t){let n=o.slice(e);return n.reduce((e,n)=>e.then(()=>n(t)),Promise.resolve()).then(()=>!0)}async function initDatabase(){return new Promise((e,t)=>{let n=indexedDB.open(r.$P,r.tr);n.onupgradeneeded=t=>{console.log("upgrade is called. old version = ".concat(t.oldVersion,", new version ").concat(t.newVersion));let r=n.result;executeMigrations(t.oldVersion,r).then(t=>{e(t),r.close()})},n.onsuccess=()=>{console.log("Database was successful created."),e(!0)},n.onerror=()=>{console.log("An error occurred initDatabase() function."),t(!1)}})}async function getSiteFeeds(){return new Promise((e,t)=>{let n=indexedDB.open(r.$P,r.tr);n.onsuccess=async()=>{let t=n.result,o=await getAll(t,r.h4.Name);e(o),t.close()},n.onerror=async()=>{console.log("An error occurred getSiteFeeds() function."),t("An error occurred getSiteFeeds() function.")}})}async function getSiteFeed(e){return new Promise((t,n)=>{let o=indexedDB.open(r.$P,r.tr);o.onsuccess=async()=>{let n=o.result,i=await getOne(n,r.h4.Name,e);t(i),n.close()},o.onerror=async()=>{console.log("An error occurred getSiteFeeds() function."),n("An error occurred getSiteFeeds() function.")}})}async function insertSiteFeed(e){let t=indexedDB.open(r.$P,r.tr);t.onsuccess=async()=>{let n=t.result;await insert(n,r.h4.Name,[e]),n.close()},t.onerror=async()=>{console.log("An error occurred insertSiteFeed() function.")}}async function updateSiteFeed(e){return new Promise((t,n)=>{let o=indexedDB.open(r.$P,r.tr);o.onsuccess=async()=>{let n=o.result;await update(n,r.h4.Name,e),n.close(),t()},o.onerror=async()=>{console.log("An error occurred updateSiteFeed() function."),n()}})}async function deleteSiteFeed(e){let t=indexedDB.open(r.$P,r.tr);t.onsuccess=async()=>{let n=t.result;await deleteByName(n,r.h4.Name,e),n.close()},t.onerror=async()=>{console.log("An error occurred deleteSiteFeed() function.")}}},7276:function(e,t,n){"use strict";n.d(t,{C8:function(){return setDarkMode},KU:function(){return getFavicon},UL:function(){return setLightMode}});var r=n(5392);function setDarkMode(){document.documentElement.style.setProperty("--body-bg-color","#000"),document.documentElement.style.setProperty("--body-color","#FFF"),document.documentElement.style.setProperty("--link-color","#FFC400"),document.documentElement.style.setProperty("--link-visited-color","#C27DC0"),document.documentElement.style.setProperty("--rss-orange","#ee802f")}function setLightMode(){document.documentElement.style.setProperty("--body-bg-color","#FFF"),document.documentElement.style.setProperty("--body-color","#000"),document.documentElement.style.setProperty("--link-color","#00E"),document.documentElement.style.setProperty("--link-visited-color","#551A8B"),document.documentElement.style.setProperty("--rss-orange","#ee802f")}async function getFavicon(e){try{var t,n;let o=null!==(n=e&&(null===(t=(await r.Z.getBestIcons(e))[0])||void 0===t?void 0:t.href))&&void 0!==n?n:await fetch("".concat(e,"/favicon.ico"),{method:"HEAD"}).then(t=>t.ok?"".concat(e,"/favicon.ico"):void 0);return o}catch(e){return}}},9101:function(e){e.exports={container:"Date_container__hdPAO"}},8723:function(e){e.exports={form:"ExportImportForm_form___wXLI"}},2371:function(e){e.exports={link:"ExternalLink_link__pmplM"}},1392:function(e){e.exports={pin:"FavoritePin_pin__UXBo1",pinned:"FavoritePin_pinned__5mFqL"}},3766:function(e){e.exports={footer:"Footer_footer__o4_Ec"}},8378:function(e){e.exports={header:"Header_header__pXml_",iframeContainer:"Header_iframeContainer__vj6pl",details:"Header_details__GOEwI",usage:"Header_usage__itp_N"}},5813:function(e){e.exports={form:"NewFeedForm_form__LXQRv"}},470:function(e){e.exports={list:"NewItemsList_list__T6VQr"}},9579:function(e){e.exports={container:"ProgressLoader_container__NBYfI"}},2550:function(e){e.exports={container:"VisitedItemsList_container__i2HDj"}}}]);